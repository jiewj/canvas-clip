<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>canvas-clip</title>
    <style>
        .test {
            position: relative;
            width: 500px;
            height: 500px;
            border: 1px solid #000;
        }
    </style>
<script type="text/javascript" src="js/canvas-clip.js"></script></head>
<body>
<div class="test" id="test"></div>
<input type="button" value="clip" onclick="Fun()">
<select id="select">
    <option value="./e_bw.jpg">横图</option>
    <option value="./tooopen.jpg">竖图</option>
</select>
<script>
  var a = new CanvasClip({
    id: 'test',
    imgUrl: './e_bw.jpg',
    scale: 2 / 1,
    clipImgMinW: 200,
    clipImgMinH: 100
  });
  console.log(a);
  document.getElementById('select').addEventListener('change', function () {
    a.config.imgUrl = this.value;
    a.ImgUrl(this.value);
  });

  function Fun() {
    var img = document.getElementById('img');
    if (img) {
      img.src = URL.createObjectURL(a.CanvasClipImg());
    } else {
      img = document.createElement('img');
      img.id = 'img';
      img.src = URL.createObjectURL(a.CanvasClipImg());
      document.body.appendChild(img);
    }
  }
</script>
</body>
</html>
